<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carta Educativa: Tortuga de Gal√°pagos</title>
  <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-principal: #8b7d5b;
      --color-secundario: #e8dfc1;
      --color-texto: #3a3426;
      --color-fondo: #f5f1e6;
      --color-barras-vacias: #d5c9a6;
      --color-boton-exportar: #5a8b5b;
    }
    body {
      margin: 0;
      padding: 20px;
      background-color: var(--color-fondo);
      font-family: 'IM Fell English', serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .container {
      max-width: 1200px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .card {
      width: 840px;
      height: 1400px;
      background-color: var(--color-secundario);
      border: 8px solid var(--color-principal);
      border-radius: 18px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      position: relative;
      padding: 20px;
      box-sizing: border-box;
      background-image: repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,0,0,0.01) 5px);
    }
    .header {
      background-color: var(--color-principal);
      color: #f5f1e6;
      padding: 30px;
      transform: rotate(-1deg);
      text-align: center;
      border-radius: 10px;
      font-family: 'Playfair Display', serif;
    }
    .animal-name {
      font-size: 5rem;
      text-transform: uppercase;
    }
    .scientific-name {
      font-size: 2.5rem;
      font-style: italic;
      color: #5a4d38;
      margin-top: 8px;
    }
    .description {
      background-color: #f5f1e6;
      border: 3px solid var(--color-principal);
      height: 40%;
      padding: 20px;
      overflow-y: auto;
      font-size: 2.5rem;
      color: var(--color-texto);
      margin-top: 20px;
      box-sizing: border-box;
    }
    .attributes {
      background-color: #f5f1e6;
      border: 3px solid var(--color-principal);
      margin-top: 20px;
      padding: 15px;
      box-sizing: border-box;
    }
    .attribute {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .attribute-name {
      width: 50%;
      font-size: 2.5rem;
      align-items: center;
    }
    .attribute-bars {
      width: 50%;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .bar {
      flex: 1;
      height: 50px;
      background-color: var(--color-barras-vacias);
      border: 1px solid var(--color-principal);
      border-radius: 3px;
    }
    .bar.filled {
      background-color: var(--color-principal);
    }
    .footer {
      margin-top: 20px;
      font-size: 1.5rem;
      font-style: italic;
      color: #5a4d38;
      text-align: center;
    }
    .editor {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      flex: 1;
      min-width: 300px;
      max-width: 700px;
    }
    .editor label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    .editor input, .editor select, .editor textarea {
      width: 100%;
      margin-top: 5px;
      padding: 8px 12px;
      border: 1px solid #d5c9a6;
      border-radius: 5px;
      font-family: 'IM Fell English', serif;
    }
    .editor textarea {
      height: 100px;
      resize: vertical;
    }
    .buttons {
      margin-top: 20px;
      display: flex;
      gap: 50px;
      flex-wrap: wrap;
    }
    .buttons button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      font-family: 'IM Fell English', serif;
    }
    .buttons button:hover {
      filter: brightness(0.8);
    }
    #update { background-color: var(--color-principal); }
    #reset { background-color: var(--color-principal); }
    #export { background-color: var(--color-boton-exportar); }
    #addAttr { background-color: #4a754a; }
    #animalList {
      width: 100%;
      max-width: 1200px;
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    #animalList button {
      padding: 8px 12px;
      font-family: 'IM Fell English', serif;
      border: 2px solid var(--color-principal);
      background-color: var(--color-secundario);
      cursor: pointer;
      border-radius: 6px;
      text-transform: uppercase;
      color: var(--color-principal);
      transition: background-color 0.3s, color 0.3s;
    }
    #animalList button:hover, #animalList button.active {
      background-color: var(--color-principal);
      color: var(--color-secundario);
    }
    @media (max-width: 992px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
      #animalList {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div id="animalList"></div>
  <div class="container">
    <div class="card" id="card">
      <div class="header">
        <div class="animal-name" id="animalName">Tortuga de Gal√°pagos</div>
        <div class="scientific-name" id="scientificName">Chelonoidis nigra</div>
      </div>
      <div class="description" id="description">
        La tortuga gigante de Gal√°pagos es una de las especies de tortugas m√°s grandes del mundo.
        Puede pesar hasta 400 kg y vivir m√°s de 100 a√±os. Es herb√≠vora y se alimenta principalmente de cactus, hojas y frutas.
        Su caparaz√≥n en forma de domo le proporciona protecci√≥n contra depredadores.
        Debido a la caza y la introducci√≥n de especies invasoras, est√° en peligro de extinci√≥n.
      </div>
      <div class="attributes" id="attributes">
        <div class="attribute"><div class="attribute-name">üå°Ô∏è Pressi√≥ Alta</div><div class="attribute-bars" data-value="3"></div></div>
        <div class="attribute"><div class="attribute-name">üíß Clima Fred</div><div class="attribute-bars" data-value="5"></div></div>
        <div class="attribute"><div class="attribute-name">üèÉ Gravetat Alta</div><div class="attribute-bars" data-value="1"></div></div>
        <div class="attribute"><div class="attribute-name">üõ°Ô∏è Poc Menjar</div><div class="attribute-bars" data-value="4"></div></div>
        <div class="attribute"><div class="attribute-name">üß† Compet√®ncia Hostil</div><div class="attribute-bars" data-value="2"></div></div>
      </div>
      <div class="footer">Departament d'Astrosinbiologia  ‚Ä¢ Projecte Skippit </div>
    </div>
    <div class="editor">
      <label>Nom de l'Animal</label>
      <input id="inputName" value="Tortuga de Gal√°pagos">
      <label>Nom Cient√≠fic</label>
      <input id="inputScientific" value="Chelonoidis nigra">
      <label>Descripci√≥</label>
      <textarea id="inputDescription">La tortuga gigante de Gal√°pagos es una de las especies de tortugas m√°s grandes del mundo.
Puede pesar hasta 400 kg y vivir m√°s de 100 a√±os. Es herb√≠vora y se alimenta principalmente de cactus, hojas y frutas.
Su caparaz√≥n en forma de domo le proporciona protecci√≥n contra depredadores.
Debido a la caza y la introducci√≥n de especies invasoras, est√° en peligro de extinci√≥n.</textarea>
      <label>Atributs</label>
      <div id="inputsAttr"></div>
      <button id="addAttr">Afegir habilitat</button>
      <label>Colors</label>
      <input type="color" id="colorPrincipal" value="#8b7d5b"> Principal<br>
      <input type="color" id="colorSecundario" value="#e8dfc1"> Secundari<br>
      <input type="color" id="colorTexto" value="#3a3426"> Text<br>
      <div class="buttons">
        <button id="update">Actualitzar Carta</button>
        <button id="reset">Restableix</button>
        <button id="export">Exportar com PNG</button>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    const defaultColors = {
      principal: '#8b7d5b',
      secundario: '#e8dfc1',
      texto: '#3a3426'
    };

    // Datos de animales
   const animals = [
  {
    name: "Pop M√≠mic",
    scientific: "Thaumoctopus mimicus",
    description: `Aquest pop pot imitar fins a 15 esp√®cies diferents, des de serps fins a peixos verinosos, per dissuadir depredadors. 
La seva capacitat de camuflatge instantani el converteix en un artista de l‚Äôengany. 
√âs extremadament adaptable a amenaces biol√≤giques, encara que no tant a canvis extrems de pressi√≥ o temperatura.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 2},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Mix√≠",
    scientific: "Classe Myxini",
    description: `Aquest estrany peix sense mand√≠bula s‚Äôalimenta de cad√†vers al fons de l‚Äôoce√†, entrant per qualsevol orifici disponible. 
Es defensa produint una baba tan espessa que pot entapar les br√†nquies dels depredadors. 
Un supervivent per naturalesa, ideal per a entorns profunds i amb pocs recursos.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 5},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 4},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Llagost√≠ Pistola",
    scientific: "Alpheidae spp.",
    description: `Aquest diminut crustaci pot generar una ona de xoc de m√©s de 200 decibels en tancar la pin√ßa a velocitats supers√≤niques. 
El cop genera una bombolla de cavitaci√≥ que emet llum quan col¬∑lapsa. 
Tot i no ser el m√©s resistent f√≠sicament, √©s un veritable guerrer del microcosmos.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 3},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Aranya d‚Äôaigua",
    scientific: "Argyroneta aquatica",
    description: `L‚Äô√∫nica aranya coneguda que viu gaireb√© tota la seva vida submergida. 
Fa servir una bombolla d‚Äôaire com a ‚Äúcampana de busseig‚Äù, permetent-li respirar sota l‚Äôaigua. 
S‚Äôadapta b√© a ambients pobres en oxigen i amb variacions de pressi√≥ i temperatura.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 2},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Trit√≥ acanalat espanyol",
    scientific: "Pleurodeles waltl",
    description: `Quan se sent en perill, treu les costelles punxegudes a trav√©s de la pell com si fossin dagues. 
Una defensa brutal!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 2},
      {name: "üíß Clima Fred", value: 4},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Zarihuella",
    scientific: "Caluromys philander",
    description: `Quan se sent amena√ßada, es desmaia com si fos morta: queda r√≠gida, treu la llengua i fins i tot despr√®n una pudor forta per enganyar els depredadors.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Weta de pedra de muntanya",
    scientific: "Hemideina maori",
    description: `Insecte gegant de Nova Zelanda, semblant a un grill. 
Pot sobreviure congelada durant l‚Äôhivern gr√†cies a prote√Ønes antigel. 
Quan la temperatura puja, es descongela i continua viva. 
Tamb√© pot viure en al√ßades i amb molt poc menjar.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 3},
      {name: "üíß Clima Fred", value: 5},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 2},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Ping√º√≠ Emperador",
    scientific: "Aptenodytes forsteri",
    description: `El ping√º√≠ emperador √©s l‚Äô√∫nic animal que es reprodueix durant l‚Äôhivern ant√†rtic, suportant temperatures de fins a -60‚ÄØ¬∞C. El seu plomatge dens i una capa de greix de diversos cent√≠metres el converteixen en un mestre de l‚Äôa√Øllament t√®rmic. A m√©s, hiberna parcialment per conservar energia. S√≥n campions del fred extrem!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 2},
      {name: "üíß Clima Fred", value: 5},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 1},
    ],
    colors: {...defaultColors},
  },
  {
    name: "√ìs Polar",
    scientific: "Ursus maritimus",
    description: `La seva pell √©s negra per absorbir la calor, i el seu pelatge, tot i ser blanc a la vista, √©s buit per atrapar aire calent. Pot dejunar durant mesos si no troba foques, la seva presa principal. S√≥n experts a detectar el gel fi i l‚Äôolor de les foques a quil√≤metres.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 5},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 3},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Peix Drac de l‚ÄôAbisme",
    scientific: "Idiacanthus atlanticus",
    description: `Viu a m√©s de 1.000 m de profunditat, on la pressi√≥ esclafaria altres √©ssers vius. T√© √≤rgans bioluminiscents per atraure preses i comunicar-se. La seva mand√≠bula pot estendre‚Äôs enormement, engoleix preses gaireb√© de la seva mida!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 5},
      {name: "üíß Clima Fred", value: 4},
      {name: "üèÉ Gravetat Alta", value: 1},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 2},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Cefal√≤pode Vampir",
    scientific: "Vampyroteuthis infernalis",
    description: `No √©s ni pop ni vampir, sin√≥ una criatura √∫nica. Viu a m√©s de 900‚ÄØm de profunditat, on la llum no arriba. Pot sobreviure en aig√ºes amb menys del 5‚ÄØ% d‚Äôoxigen. La seva ‚Äúcapa‚Äù de pell sembla una capa de vampir, per√≤ no mossega!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 5},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 1},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Camell Bactri√†",
    scientific: "Camelus bactrianus",
    description: `El camell pot passar setmanes sense aigua, i les seves genetes no emmagatzemen aigua sin√≥ greix, que pot metabolitzar per obtenir energia i humitat. El seu nas recull el vapor de l‚Äôaire exhalat per no perdre ni una gota. √âs el tanc del desert!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 5},
      {name: "üß† Compet√®ncia Hostil", value: 1},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Guineu √Ärtica",
    scientific: "Vulpes lagopus",
    description: `El seu pelatge canvia segons l‚Äôestaci√≥: blanc a l‚Äôhivern per camuflar-se a la neu i marr√≥ a l‚Äôestiu. Les seves potes estan cobertes de p√®l, fent de ‚Äúbotes naturals‚Äù. Tamb√© pot sentir les seves preses sota la neu i fer salts precisos per atrapar-les.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 5},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 4},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Catxalot",
    scientific: "Physeter macrocephalus",
    description: `El catxalot pot submergir-se m√©s de 2.000 metres i aguantar la respiraci√≥ fins a dues hores. Per evitar la pressi√≥, col¬∑lapsa parcialment els pulmons en baixar. Caza calamars gegants a les profunditats i fa servir ecolocalitzaci√≥ com un sonar natural.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 5},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 3},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Peix Pulmonat Afric√†",
    scientific: "Protopterus annectens",
    description: `Aquest peix pot respirar aire i sobreviure en estat d‚Äôestivaci√≥ durant per√≠odes de sequera. Cava un forat i s‚Äôenvolta en un capoll de mucositat endurida, vivint en un estat semi let√†rgic durant mesos.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 5},
      {name: "üß† Compet√®ncia Hostil", value: 1},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Cangur Vermell",
    scientific: "Macropus rufus",
    description: `Els cangurs s√≥n els √∫nics animals grans que es desplacen fent salts. Els salts, que fan movent les potes del darrere simult√†niament, s√≥n un mode de locomoci√≥ r√†pid i econ√≤mic, ja que a altes velocitats consumeixen nom√©s una fracci√≥ de l‚Äôenergia que gastarien despla√ßant-se d‚Äôuna altra manera.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 5},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 4},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Mol¬∑lusc Escaf√≤pode",
    scientific: "Classe Scaphopoda",
    description: `Els escaf√≤podes, tamb√© coneguts com ‚Äúpetxines ullals‚Äù, viuen enterrats en els fons marins a profunditats que sovint superen els 1.000 metres. El seu cos est√† adaptat a la vida en alta pressi√≥ i sediments pobres en oxigen, gr√†cies a un metabolisme lent i la capacitat d‚Äôabsorbir nutrients directament del sediment. La seva forma allargada i tubular els permet excavar efica√ßment, per√≤ la seva sensibilitat als canvis t√®rmics i la limitada capacitat per regular la flotaci√≥ els fa poc vers√†tils fora del seu h√†bitat.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 5},
      {name: "üíß Clima Fred", value: 2},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 3},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Panaque",
    scientific: "Panaque nigrolineatus",
    description: `El panaque √©s un dels pocs vertebrats coneguts que pot digerir fusta, gr√†cies a bacteris intestinals especialitzats. Viu en rius d‚ÄôAm√®rica del Sud, on s‚Äôalimenta de troncs i arrels. Aquesta dieta baixa en nutrients explica la seva lentitud i poca toler√†ncia a l‚Äôesfor√ß. Tot i que la seva capacitat per sobreviure amb recursos escassos √©s impressionant, no resistiria pressions o temperatures extremes.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 1},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 5},
      {name: "üß† Compet√®ncia Hostil", value: 2},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Gripau P√®lut",
    scientific: "Trichobatrachus robustus",
    description: `Originari de Camerun, aquest gripau mascle desenvolupa unes ‚Äúpelusses‚Äù laterals que en realitat s√≥n estructures riques en vasos sanguinis, cosa que augmenta la seva capacitat d‚Äôabsorbir oxigen a trav√©s de la pell. √âs un dels pocs gripaus que es pot autolesionar per defensar-se: trenca els seus propis ossos i els treu com a urpes. Una adaptaci√≥ extrema a entorns competitius i agressius!`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Ratpenat",
    scientific: "Chiroptera",
    description: `Els ratpenats s√≥n els √∫nics mam√≠fers capa√ßos de vol actiu. Gr√†cies a la seva relaci√≥ pes/superf√≠cie alar, podrien adaptar-se b√© a una gravetat augmentada. Alguns ratpenats hivernen durant mesos, cosa que els fa resistents a canvis estacionals d‚Äôaliment. La seva ecolocalitzaci√≥ els permet ca√ßar amb precisi√≥ fins i tot en entorns amb poca llum.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 2},
      {name: "üíß Clima Fred", value: 3},
      {name: "üèÉ Gravetat Alta", value: 5},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 2},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Termites de Guinea",
    scientific: "Macrotermes bellicosus",
    description: `Aquestes termites construeixen veritables gratacels subterr√†nis amb ventilaci√≥ natural, capa√ßos de mantenir temperatura i humitat constants. Viuen en societat amb fongs simbionts, cultivats per elles mateixes. S√≥n expertes en aprofitar recursos i defensar la seva col√≤nia davant m√∫ltiples amenaces. Tanmateix, depenen de condicions t√®rmiques estables i serien molt vulnerables al fred o a pressi√≥ elevada.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 1},
      {name: "üèÉ Gravetat Alta", value: 2},
      {name: "üõ°Ô∏è Poc Menjar", value: 3},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  },
  {
    name: "Drac de Komodo",
    scientific: "Varanus komodoensis",
    description: `√âs el llangardaix m√©s gran del m√≥n. T√© una mossegada infectada amb bacteris i una lleugera toxicitat, que utilitza per debilitar les seves preses. Poden passar setmanes sense menjar i detectar carn a diversos quil√≤metres. La seva capacitat per regular el metabolisme i la seva for√ßa bruta el fan ideal per a ambients hostils, encara que no tolera b√© el fred.`,
    attributes: [
      {name: "üå°Ô∏è Pressi√≥ Alta", value: 1},
      {name: "üíß Clima Fred", value: 1},
      {name: "üèÉ Gravetat Alta", value: 3},
      {name: "üõ°Ô∏è Poc Menjar", value: 4},
      {name: "üß† Compet√®ncia Hostil", value: 5},
    ],
    colors: {...defaultColors},
  }
];



    let currentAnimalIndex = 0;

    // Referencias DOM
    const animalName = document.getElementById('animalName');
    const scientificName = document.getElementById('scientificName');
    const description = document.getElementById('description');
    const attributesDiv = document.getElementById('attributes');
    const inputsAttr = document.getElementById('inputsAttr');
    const inputName = document.getElementById('inputName');
    const inputScientific = document.getElementById('inputScientific');
    const inputDescription = document.getElementById('inputDescription');
    const colorPrincipal = document.getElementById('colorPrincipal');
    const colorSecundario = document.getElementById('colorSecundario');
    const colorTexto = document.getElementById('colorTexto');
    const addAttrBtn = document.getElementById('addAttr');
    const animalListDiv = document.getElementById('animalList');
    const card = document.getElementById('card');

    // Mostrar lista de animales para seleccionar
    function renderAnimalButtons(){
      animalListDiv.innerHTML = '';
      animals.forEach((animal, idx) => {
        const btn = document.createElement('button');
        btn.textContent = animal.name;
        btn.classList.toggle('active', idx === currentAnimalIndex);
        btn.onclick = () => {
          currentAnimalIndex = idx;
          loadAnimal();
          renderAnimalButtons();
        };
        animalListDiv.appendChild(btn);
      });
    }

    // Mostrar atributos en la ficha
    function renderAttributes(){
      attributesDiv.innerHTML = '';
      const attrs = animals[currentAnimalIndex].attributes;
      attrs.forEach(attr => {
        const attrDiv = document.createElement('div');
        attrDiv.className = 'attribute';
        const nameDiv = document.createElement('div');
        nameDiv.className = 'attribute-name';
        nameDiv.textContent = attr.name;
        const barsDiv = document.createElement('div');
        barsDiv.className = 'attribute-bars';
        for(let i=0; i<5; i++){
          const bar = document.createElement('div');
          bar.className = 'bar' + (i < attr.value ? ' filled' : '');
          barsDiv.appendChild(bar);
        }
        attrDiv.appendChild(nameDiv);
        attrDiv.appendChild(barsDiv);
        attributesDiv.appendChild(attrDiv);
      });
    }

    // Render inputs para atributos en editor
    function renderInputsAttributes(){
      inputsAttr.innerHTML = '';
      const attrs = animals[currentAnimalIndex].attributes;
      attrs.forEach((attr, i) => {
        const container = document.createElement('div');
        container.style.display = 'flex';
        container.style.gap = '10px';
        container.style.marginBottom = '10px';

        // Editable nombre
        const inputNameAttr = document.createElement('input');
        inputNameAttr.type = 'text';
        inputNameAttr.value = attr.name;
        inputNameAttr.style.flex = '3';
        inputNameAttr.oninput = (e) => {
          animals[currentAnimalIndex].attributes[i].name = e.target.value;
        };

        // Valor atributo (select 0-5)
        const selectValue = document.createElement('select');
        selectValue.style.flex = '1';
        for(let v=0; v<=5; v++){
          const option = document.createElement('option');
          option.value = v;
          option.textContent = v;
          if(v === attr.value) option.selected = true;
          selectValue.appendChild(option);
        }
        selectValue.onchange = (e) => {
          animals[currentAnimalIndex].attributes[i].value = parseInt(e.target.value);
        };

        // Bot√≥n para eliminar atributo
        const btnRemove = document.createElement('button');
        btnRemove.textContent = '‚úï';
        btnRemove.title = 'Eliminar habilidad';
        btnRemove.style.flex = '0 0 25px';
        btnRemove.style.background = '#d9534f';
        btnRemove.style.color = 'white';
        btnRemove.style.border = 'none';
        btnRemove.style.borderRadius = '4px';
        btnRemove.style.cursor = 'pointer';
        btnRemove.onclick = () => {
          animals[currentAnimalIndex].attributes.splice(i,1);
          renderInputsAttributes();
        };

        container.appendChild(inputNameAttr);
        container.appendChild(selectValue);
        container.appendChild(btnRemove);
        inputsAttr.appendChild(container);
      });
    }

    // Cargar datos animal actual en la ficha y editor
    function loadAnimal(){
      const animal = animals[currentAnimalIndex];
      inputName.value = animal.name;
      inputScientific.value = animal.scientific;
      inputDescription.value = animal.description;
      colorPrincipal.value = animal.colors.principal;
      colorSecundario.value = animal.colors.secundario;
      colorTexto.value = animal.colors.texto;
      applyColors(animal.colors.principal, animal.colors.secundario, animal.colors.texto);
      renderAttributes();
      renderInputsAttributes();
      animalName.textContent = animal.name;
      scientificName.textContent = animal.scientific;
      description.textContent = animal.description;
    }

    // Aplicar colores a la ficha (variables CSS)
    function applyColors(principal, secundario, texto){
      document.documentElement.style.setProperty('--color-principal', principal);
      document.documentElement.style.setProperty('--color-secundario', secundario);
      document.documentElement.style.setProperty('--color-texto', texto);
    }

    // Actualizar datos animal con valores del editor
    function updateAnimal(){
      const animal = animals[currentAnimalIndex];
      animal.name = inputName.value.trim() || animal.name;
      animal.scientific = inputScientific.value.trim() || animal.scientific;
      animal.description = inputDescription.value.trim() || animal.description;
      animal.colors.principal = colorPrincipal.value;
      animal.colors.secundario = colorSecundario.value;
      animal.colors.texto = colorTexto.value;
      applyColors(animal.colors.principal, animal.colors.secundario, animal.colors.texto);

      animalName.textContent = animal.name;
      scientificName.textContent = animal.scientific;
      description.textContent = animal.description;
      renderAttributes();
      renderInputsAttributes();
      renderAnimalButtons();
    }

    // Restablecer datos al valor original (de animals)
    function resetAnimal(){
      // Recarga los datos guardados en animals para el actual
      loadAnimal();
    }

    // A√±adir nueva habilidad (atributo)
    function addAttribute(){
      animals[currentAnimalIndex].attributes.push({name: "Nueva habilidad", value: 0});
      renderInputsAttributes();
    }

    // Exportar tarjeta como imagen PNG
    function exportPNG(){
      // Quitar el borde para exportar sin el padding extra
      html2canvas(card, {backgroundColor: null}).then(canvas => {
        const link = document.createElement('a');
        link.download = animals[currentAnimalIndex].name.replace(/\s+/g,'_').toLowerCase() + '.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    // Eventos botones
    document.getElementById('update').addEventListener('click', updateAnimal);
    document.getElementById('reset').addEventListener('click', resetAnimal);
    document.getElementById('export').addEventListener('click', exportPNG);
    addAttrBtn.addEventListener('click', addAttribute);

    // Inicializar
    renderAnimalButtons();
    loadAnimal();
  </script>
</body>
</html>